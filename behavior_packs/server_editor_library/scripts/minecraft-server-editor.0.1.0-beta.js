/*! For license information please see minecraft-server-editor.0.1.0-beta.js.LICENSE.txt */
import*as e from"@minecraft/server-editor-bindings";import*as t from"@minecraft/server";var i={869:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clampNumber=void 0,t.clampNumber=function(e,t,i){return Math.min(Math.max(e,t),i)}},605:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(869),t)},79:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(200),t),s(i(605),t)},604:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VECTOR3_SOUTH=t.VECTOR3_NORTH=t.VECTOR3_EAST=t.VECTOR3_WEST=t.VECTOR3_ZERO=t.VECTOR3_ONE=t.VECTOR3_BACK=t.VECTOR3_FORWARD=t.VECTOR3_RIGHT=t.VECTOR3_LEFT=t.VECTOR3_DOWN=t.VECTOR3_UP=t.Vector2Utils=t.Vector3Utils=void 0;const n=i(869);class s{static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}static subtract(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}static scale(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static cross(e,t){return{x:e.y*t.z-e.z*t.y,y:e.z*t.x-e.x*t.z,z:e.x*t.y-e.y*t.x}}static magnitude(e){return Math.sqrt(e.x**2+e.y**2+e.z**2)}static normalize(e){const t=s.magnitude(e);return{x:e.x/t,y:e.y/t,z:e.z/t}}static floor(e){return{x:Math.floor(e.x),y:Math.floor(e.y),z:Math.floor(e.z)}}static toString(e,t){const i=t?.decimals??2;return[e.x.toFixed(i),e.y.toFixed(i),e.z.toFixed(i)].join(t?.delimiter??", ")}static clamp(e,t){return{x:(0,n.clampNumber)(e.x,t?.min?.x??Number.MIN_SAFE_INTEGER,t?.max?.x??Number.MAX_SAFE_INTEGER),y:(0,n.clampNumber)(e.y,t?.min?.y??Number.MIN_SAFE_INTEGER,t?.max?.y??Number.MAX_SAFE_INTEGER),z:(0,n.clampNumber)(e.z,t?.min?.z??Number.MIN_SAFE_INTEGER,t?.max?.z??Number.MAX_SAFE_INTEGER)}}}t.Vector3Utils=s;t.Vector2Utils=class{static toString(e,t){const i=t?.decimals??2;return[e.x.toFixed(i),e.y.toFixed(i)].join(t?.delimiter??", ")}},t.VECTOR3_UP={x:0,y:1,z:0},t.VECTOR3_DOWN={x:0,y:-1,z:0},t.VECTOR3_LEFT={x:-1,y:0,z:0},t.VECTOR3_RIGHT={x:1,y:0,z:0},t.VECTOR3_FORWARD={x:0,y:0,z:1},t.VECTOR3_BACK={x:0,y:0,z:-1},t.VECTOR3_ONE={x:1,y:1,z:1},t.VECTOR3_ZERO={x:0,y:0,z:0},t.VECTOR3_WEST={x:-1,y:0,z:0},t.VECTOR3_EAST={x:1,y:0,z:0},t.VECTOR3_NORTH={x:0,y:0,z:1},t.VECTOR3_SOUTH={x:0,y:0,z:-1}},200:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(604),t),s(i(963),t)},963:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2Builder=t.Vector3Builder=void 0;const n=i(604);t.Vector3Builder=class{constructor(e,t,i){"object"==typeof e?(this.x=e.x,this.y=e.y,this.z=e.z):(this.x=e,this.y=t??0,this.z=i??0)}assign(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}equals(e){return n.Vector3Utils.equals(this,e)}add(e){return this.assign(n.Vector3Utils.add(this,e))}subtract(e){return this.assign(n.Vector3Utils.subtract(this,e))}scale(e){return this.assign(n.Vector3Utils.scale(this,e))}dot(e){return n.Vector3Utils.dot(this,e)}cross(e){return this.assign(n.Vector3Utils.cross(this,e))}magnitude(){return n.Vector3Utils.magnitude(this)}normalize(){return this.assign(n.Vector3Utils.normalize(this))}floor(){return this.assign(n.Vector3Utils.floor(this))}toString(e){return n.Vector3Utils.toString(this,e)}clamp(e){return this.assign(n.Vector3Utils.clamp(this,e))}};t.Vector2Builder=class{constructor(e,t){"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t??0)}toString(e){return n.Vector2Utils.toString(this,e)}}},378:e=>{e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var n,s,o;if(Array.isArray(t)){if((n=t.length)!=i.length)return!1;for(s=n;0!=s--;)if(!e(t[s],i[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,o[s]))return!1;for(s=n;0!=s--;){var r=o[s];if(!e(t[r],i[r]))return!1}return!0}return t!=t&&i!=i}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return i[e].call(o.exports,o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{var i,n,r,a,l,h,d,p,c,_,u,g,m,y,b,v,f,E,C,P,I,S,T,x,w,M,D,B,A;s.d(o,{MF:()=>i,So:()=>L,ni:()=>U.BlockPalette,M1:()=>U.BlockPaletteItemType,M5:()=>U.BlockPaletteManager,si:()=>x,yy:()=>U.BrushPipelineOperationType,ih:()=>U.BrushShapeManager,Cc:()=>S,ss:()=>U.ClipboardChangeAfterEvent,yo:()=>U.ClipboardChangeAfterEventSignal,xf:()=>U.ClipboardItem,UD:()=>U.ClipboardManager,i5:()=>T,bu:()=>m,eC:()=>ue,CF:()=>U.Cursor,Po:()=>U.CursorAttachmentPropertiesChangeAfterEvent,dN:()=>U.CursorAttachmentPropertyChangeAfterEventSignal,TN:()=>U.CursorControlMode,dT:()=>U.CursorPropertiesChangeAfterEvent,Gm:()=>U.CursorPropertyChangeAfterEventSignal,zI:()=>U.CursorTargetMode,kQ:()=>U.CustomWidget,bs:()=>U.CustomWidgetMoveEventData,rL:()=>U.DaylightCycle,my:()=>$,je:()=>U.EditorMode,oD:()=>b,GU:()=>ge,uW:()=>U.EntityOperationType,aF:()=>U.ExportManager,Dx:()=>U.ExportResult,hj:()=>U.Extension,gN:()=>U.ExtensionContext,u2:()=>U.ExtensionContextAfterEvents,Y7:()=>U.GamePublishSetting,kZ:()=>U.GraphicsSettings,fT:()=>U.GraphicsSettingsProperty,zh:()=>U.IBlockPaletteItem,el:()=>w,P3:()=>r,u8:()=>p,KN:()=>g,ui:()=>M,z7:()=>U.LineWidget,Yd:()=>U.Logger,s9:()=>U.MinecraftEditor,VH:()=>U.ModeChangeAfterEvent,zo:()=>U.ModeChangeAfterEventSignal,oq:()=>l,BI:()=>h,_Y:()=>d,IT:()=>U.PlayerPermissionLevel,uG:()=>U.PlaytestManager,YY:()=>U.PlaytestSessionResult,VP:()=>U.PrimarySelectionChangeAfterEventSignal,t6:()=>U.PrimarySelectionChangedEvent,eo:()=>U.ProbabilityBlockPaletteItem,l2:()=>U.ProjectExportType,AO:()=>I,Y1:()=>U.Selection,XS:()=>U.SelectionEventAfterEvent,ZE:()=>U.SelectionManager,Sp:()=>C,pz:()=>U.SettingsManager,vQ:()=>U.SettingsUIElement,F_:()=>U.SimpleBlockPaletteItem,ES:()=>ct,EX:()=>yt,BH:()=>U.SimulationState,fM:()=>U.ThemeSettings,vH:()=>U.ThemeSettingsColorKey,wt:()=>U.TransactionManager,DQ:()=>U.UserDefinedTransactionHandlerId,$L:()=>U.Widget,w2:()=>U.WidgetGroup,g2:()=>U.WidgetGroupSelectionMode,fH:()=>U.WidgetManager,vJ:()=>U.WidgetStateChangeEventData,Rn:()=>Oe,j6:()=>U.editor,lK:()=>lt,iF:()=>ht,YH:()=>R,rC:()=>de,CD:()=>ot,xJ:()=>pt}),function(e){e.NoArgsAction="NoArgsAction",e.MouseRayCastAction="MouseRayCastAction"}(i||(i={})),function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse"}(n||(n={})),function(e){e[e.Unused=0]="Unused",e[e.None=1]="None",e[e.Alt=2]="Alt",e[e.Control=4]="Control",e[e.Shift=8]="Shift",e[e.Any=15]="Any"}(r||(r={})),function(e){e[e.Press=1]="Press",e[e.Release=2]="Release"}(a||(a={})),function(e){e[e.Button=1]="Button",e[e.Wheel=2]="Wheel",e[e.Drag=3]="Drag"}(l||(l={})),function(e){e[e.LeftButton=1]="LeftButton",e[e.MiddleButton=2]="MiddleButton",e[e.RightButton=3]="RightButton",e[e.Wheel=4]="Wheel"}(h||(h={})),function(e){e[e.ButtonDown=1]="ButtonDown",e[e.ButtonUp=2]="ButtonUp",e[e.WheelIn=3]="WheelIn",e[e.WheelOut=4]="WheelOut",e[e.DragStart=5]="DragStart",e[e.Drag=6]="Drag",e[e.DragEnd=7]="DragEnd"}(d||(d={})),function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=106]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=107]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=108]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=110]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=111]="NUMPAD_DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.BACK_QUOTE=192]="BACK_QUOTE",e[e.BRACKET_OPEN=219]="BRACKET_OPEN",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.BRACKET_CLOSE=221]="BRACKET_CLOSE",e[e.QUOTE=222]="QUOTE"}(p||(p={})),function(e){e[e.ActionExecute=1]="ActionExecute"}(c||(c={})),function(e){e[e.UpdatePropertyPane=1]="UpdatePropertyPane",e[e.UpdateModalTool=2]="UpdateModalTool",e[e.PropertyPaneVisibilityChanged=3]="PropertyPaneVisibilityChanged",e[e.PropertyPaneCollapsedStateChanged=4]="PropertyPaneCollapsedStateChanged",e[e.UpdateObservableValue=5]="UpdateObservableValue",e[e.PropertyItemClicked=6]="PropertyItemClicked"}(_||(_={})),function(e){e[e.OnInitialize=1]="OnInitialize"}(u||(u={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(g||(g={})),function(e){e.Undo="editor:actionBarItem:undo",e.Redo="editor:actionBarItem:redo"}(m||(m={})),function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Destroy=2]="Destroy",e[e.Custom=3]="Custom",e[e.Passthrough=4]="Passthrough"}(y||(y={})),function(e){e.ServerActionEvents="Editor::ServerActionEvents",e.ServerInputBindingEvents="Editor::ServerInputBindingEvents",e.ServerUXEvents="Editor::ServerUXEvents"}(b||(b={})),function(e){e.ClientActionEvents="Editor::ClientActionEvents",e.ClientUXEvents="Editor::ClientUXEvents",e.ClientLifecycleEvents="Editor::ClientLifecycle"}(v||(v={})),function(e){e[e.Register=1]="Register",e[e.Unregister=2]="Unregister",e[e.UpdateEnablement=3]="UpdateEnablement"}(f||(f={})),function(e){e[e.RegisterMouseBinding=2]="RegisterMouseBinding",e[e.Unregister=3]="Unregister"}(E||(E={})),function(e){e[e.UpdatePropertyPane=1]="UpdatePropertyPane",e[e.DestroyPropertyPane=2]="DestroyPropertyPane",e[e.UpdateMenu=3]="UpdateMenu",e[e.DestroyMenu=4]="DestroyMenu",e[e.UpdateStatusBarItem=5]="UpdateStatusBarItem",e[e.DestroyStatusBarItem=6]="DestroyStatusBarItem",e[e.UpdateModalToolOption=7]="UpdateModalToolOption",e[e.DestroyModalToolOption=8]="DestroyModalToolOption",e[e.UpdateModalToolContainer=9]="UpdateModalToolContainer",e[e.DestroyModalToolContainer=10]="DestroyModalToolContainer",e[e.BindActionToControl=11]="BindActionToControl",e[e.RemoveActionBindingFromControl=12]="RemoveActionBindingFromControl",e[e.UpdatePropertyItem=13]="UpdatePropertyItem",e[e.DestroyPropertyItem=14]="DestroyPropertyItem",e[e.OnNavigateFromEditor=15]="OnNavigateFromEditor",e[e.UpdateControlDemoVisibility_deprecated=16]="UpdateControlDemoVisibility_deprecated",e[e.UpdateWelcomePanelVisibility_deprecated=17]="UpdateWelcomePanelVisibility_deprecated",e[e.UpdateClientPanelVisibility=18]="UpdateClientPanelVisibility"}(C||(C={})),function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(P||(P={})),function(e){e.Number="editorUI:Number",e.String="editorUI:String",e.Boolean="editorUI:Boolean",e.BlockPicker="editorUI:BlockPicker",e.ColorPicker="editorUI:ColorPicker",e.Dropdown="editorUI:Dropdown",e.Divider="editorUI:Divider",e.SubPane="editorUI:SubPane",e.Text="editorUI:Text",e.Button="editorUI:Button",e.Vector3="editorUI:Vector3",e.Image="editorUI:Image",e.Table="editorUI:Table",e.BlockList="editorUI:BlockList"}(I||(I={})),function(e){e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary",e[e.Confirmation=2]="Confirmation",e[e.Destructive=3]="Destructive"}(S||(S={})),function(e){e[e.Default=0]="Default",e[e.Inline=1]="Inline",e[e.Expanded=2]="Expanded"}(T||(T={})),function(e){e[e.Checkbox=0]="Checkbox",e[e.ToggleSwitch=1]="ToggleSwitch"}(x||(x={})),function(e){e[e.Default=0]="Default",e[e.Block=1]="Block",e[e.Icon=2]="Icon"}(w||(w={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(M||(M={})),function(e){e[e.Block=0]="Block",e[e.Entity=1]="Entity"}(D||(D={})),function(e){e[e.Documentation=1]="Documentation",e[e.Feedback=2]="Feedback",e[e.PauseScreen=3]="PauseScreen"}(B||(B={})),function(e){e[e.ControlPanel=1]="ControlPanel",e[e.WelcomePanel=2]="WelcomePanel",e[e.LogPanel=3]="LogPanel"}(A||(A={}));const U=(e=>{var t={};return s.d(t,e),t})({BlockPalette:()=>e.BlockPalette,BlockPaletteItemType:()=>e.BlockPaletteItemType,BlockPaletteManager:()=>e.BlockPaletteManager,BrushPipelineOperationType:()=>e.BrushPipelineOperationType,BrushShapeManager:()=>e.BrushShapeManager,ClipboardChangeAfterEvent:()=>e.ClipboardChangeAfterEvent,ClipboardChangeAfterEventSignal:()=>e.ClipboardChangeAfterEventSignal,ClipboardItem:()=>e.ClipboardItem,ClipboardManager:()=>e.ClipboardManager,Cursor:()=>e.Cursor,CursorAttachmentPropertiesChangeAfterEvent:()=>e.CursorAttachmentPropertiesChangeAfterEvent,CursorAttachmentPropertyChangeAfterEventSignal:()=>e.CursorAttachmentPropertyChangeAfterEventSignal,CursorControlMode:()=>e.CursorControlMode,CursorPropertiesChangeAfterEvent:()=>e.CursorPropertiesChangeAfterEvent,CursorPropertyChangeAfterEventSignal:()=>e.CursorPropertyChangeAfterEventSignal,CursorTargetMode:()=>e.CursorTargetMode,CustomWidget:()=>e.CustomWidget,CustomWidgetMoveEventData:()=>e.CustomWidgetMoveEventData,DaylightCycle:()=>e.DaylightCycle,EditorMode:()=>e.EditorMode,EntityOperationType:()=>e.EntityOperationType,ExportManager:()=>e.ExportManager,ExportResult:()=>e.ExportResult,Extension:()=>e.Extension,ExtensionContext:()=>e.ExtensionContext,ExtensionContextAfterEvents:()=>e.ExtensionContextAfterEvents,GamePublishSetting:()=>e.GamePublishSetting,GraphicsSettings:()=>e.GraphicsSettings,GraphicsSettingsProperty:()=>e.GraphicsSettingsProperty,IBlockPaletteItem:()=>e.IBlockPaletteItem,LineWidget:()=>e.LineWidget,Logger:()=>e.Logger,MinecraftEditor:()=>e.MinecraftEditor,ModeChangeAfterEvent:()=>e.ModeChangeAfterEvent,ModeChangeAfterEventSignal:()=>e.ModeChangeAfterEventSignal,PlayerPermissionLevel:()=>e.PlayerPermissionLevel,PlaytestManager:()=>e.PlaytestManager,PlaytestSessionResult:()=>e.PlaytestSessionResult,PrimarySelectionChangeAfterEventSignal:()=>e.PrimarySelectionChangeAfterEventSignal,PrimarySelectionChangedEvent:()=>e.PrimarySelectionChangedEvent,ProbabilityBlockPaletteItem:()=>e.ProbabilityBlockPaletteItem,ProjectExportType:()=>e.ProjectExportType,Selection:()=>e.Selection,SelectionEventAfterEvent:()=>e.SelectionEventAfterEvent,SelectionManager:()=>e.SelectionManager,SettingsManager:()=>e.SettingsManager,SettingsUIElement:()=>e.SettingsUIElement,SimpleBlockPaletteItem:()=>e.SimpleBlockPaletteItem,SimulationState:()=>e.SimulationState,ThemeSettings:()=>e.ThemeSettings,ThemeSettingsColorKey:()=>e.ThemeSettingsColorKey,TransactionManager:()=>e.TransactionManager,UserDefinedTransactionHandlerId:()=>e.UserDefinedTransactionHandlerId,Widget:()=>e.Widget,WidgetGroup:()=>e.WidgetGroup,WidgetGroupSelectionMode:()=>e.WidgetGroupSelectionMode,WidgetManager:()=>e.WidgetManager,WidgetStateChangeEventData:()=>e.WidgetStateChangeEventData,editor:()=>e.editor,editorInternal:()=>e.editorInternal});const O=(e=>{var t={};return s.d(t,e),t})({BlockType:()=>t.BlockType,BlockTypes:()=>t.BlockTypes,EntityTypes:()=>t.EntityTypes,system:()=>t.system,world:()=>t.world}),k=new Set(["element_0","element_1","element_2","element_3","element_4","element_5","element_6","element_7","element_8","element_9","element_10","element_11","element_12","element_13","element_14","element_15","element_16","element_17","element_18","element_19","element_20","element_21","element_22","element_23","element_24","element_25","element_26","element_27","element_28","element_29","element_30","element_31","element_32","element_33","element_34","element_35","element_36","element_37","element_38","element_39","element_40","element_41","element_42","element_43","element_44","element_45","element_46","element_47","element_48","element_49","element_50","element_51","element_52","element_53","element_54","element_55","element_56","element_57","element_58","element_59","element_60","element_61","element_62","element_63","element_64","element_65","element_66","element_67","element_68","element_69","element_70","element_71","element_72","element_73","element_74","element_75","element_76","element_77","element_78","element_79","element_80","element_81","element_82","element_83","element_84","element_85","element_86","element_87","element_88","element_89","element_90","element_91","element_92","element_93","element_94","element_95","element_96","element_97","element_98","element_99","element_100","element_101","element_102","element_103","element_104","element_105","element_106","element_107","element_108","element_109","element_110","element_111","element_112","element_113","element_114","element_115","element_116","element_117","element_118","chemistry_table","colored_torch_bp","hard_glass","hard_black_stained_glass","hard_blue_stained_glass","hard_brown_stained_glass","hard_cyan_stained_glass","hard_gray_stained_glass","hard_green_stained_glass","hard_light_blue_stained_glass","hard_light_gray_stained_glass","hard_lime_stained_glass","hard_magenta_stained_glass","hard_orange_stained_glass","hard_pink_stained_glass","hard_purple_stained_glass","hard_red_stained_glass","hard_white_stained_glass","hard_yellow_stained_glass","hard_glass_pane","hard_black_stained_glass_pane","hard_blue_stained_glass_pane","hard_brown_stained_glass_pane","hard_cyan_stained_glass_pane","hard_gray_stained_glass_pane","hard_green_stained_glass_pane","hard_light_blue_stained_glass_pane","hard_light_gray_stained_glass_pane","hard_lime_stained_glass_pane","hard_magenta_stained_glass_pane","hard_orange_stained_glass_pane","hard_pink_stained_glass_pane","hard_purple_stained_glass_pane","hard_red_stained_glass_pane","hard_white_stained_glass_pane","hard_yellow_stained_glass_pane","colored_torch_rg","underwater_torch","chemical_heat","stonecutter","netherreactor","info_update","info_update2","unknown","camera","piston_arm_collision","sticky_piston_arm_collision","glowingobsidian","moving_block","invisible_bedrock","client_request_placeholder_block","reserved6","bubble_column","petrified_oak_slab","petrified_oak_double_slab","unknown"]),N=O.BlockTypes.getAll().reduce(((e,t)=>{const i=t.id.replace("minecraft:","");return k.has(i)||e.push(i),e}),[]).sort(((e,t)=>e.localeCompare(t)));function R(){return[...N]}class L{constructor(e){this.mEvents=e,this.subscribedEvents={}}subscribeToBedrockEvent(e,...t){const i=this.mEvents[e].subscribe(...t),n=this.subscribedEvents[e];return void 0===n?this.subscribedEvents[e]=[i]:n.push(i),i}teardown(){for(const e of Object.keys(this.subscribedEvents)){const t=e,i=this.subscribedEvents[t];if(i)for(const e of i)this.mEvents[t].unsubscribe(e)}}}class V{constructor(e,t){this._system=e,this._logger=t,this.initialize=e=>{this._player=e},this.dispatchEvent=(e,t,i)=>{this._player?(this.eventQueue||(this.eventQueue=[],this._system.run(this.flush)),i?this.eventQueue.push({type:e,payload:t,replacer:i}):this.eventQueue.push({type:e,payload:t})):this._logger.warning("Attempting to flush events before initialization or after teardown.")},this.flush=()=>{if(this._player){if(this.eventQueue){let e;try{for(e of this.eventQueue)e.replacer?this._player.postClientMessage(e.type,JSON.stringify(e.payload,e.replacer)):this._player.postClientMessage(e.type,JSON.stringify(e.payload))}catch(t){this._logger.warning(`Unable to post client to message, is player invalidated? Invalidating event dispatcher player reference.\nError:${function(e){return"string"==typeof e?e:"object"==typeof e&&null!==e&&"message"in e?e.message:"Unknown exception"}(t)}\n${JSON.stringify(e)}\n`),this._player=void 0}}this.eventQueue=void 0}else this._logger.warning("Attempting to flush events before initialization or after teardown.")}}}const z=new class{constructor(e){this.listenersPerPlayer=new Map,this.onMessageReceived=e=>{const t=e;switch(t.id){case v.ClientActionEvents:{const e=this.ensureListenersForPlayer(t.player),i=JSON.parse(t.message);for(const t of e[v.ClientActionEvents])t(i);break}case v.ClientUXEvents:{const e=this.ensureListenersForPlayer(t.player),i=JSON.parse(t.message);for(const t of e[v.ClientUXEvents])t(i);break}case v.ClientLifecycleEvents:{const e=this.ensureListenersForPlayer(t.player),i=JSON.parse(t.message);for(const t of e[v.ClientLifecycleEvents])t(i);break}default:return}},this.unregisterListener=(e,t,i)=>{const n=this.ensureListenersForPlayer(t)[e];n.splice(n.indexOf(i),1)},this.ensureListenersForPlayer=e=>{let t=this.listenersPerPlayer.get(e);return t||(t={[v.ClientActionEvents]:[],[v.ClientUXEvents]:[],[v.ClientLifecycleEvents]:[]},this.listenersPerPlayer.set(e,t)),t},this.receiveCallback=e.messageReceive.subscribe(this.onMessageReceived)}registerListener(e,t,i){return this.ensureListenersForPlayer(t)[e].push(i),()=>{this.unregisterListener(e,t,i)}}teardown(e){this.receiveCallback&&(e.messageReceive.unsubscribe(this.receiveCallback),this.receiveCallback=void 0)}}(O.world.afterEvents);function K(){return z}function Y(e){throw new Error(`Unreachable throw hit! Passed in value is ${e}.`)}class F{constructor(e){this._dispatcher=e}updateLogPanelVisibility(e){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateClientPanelVisibility,panel:A.LogPanel,visible:e})}updateUISettingsPanelVisibility(e){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateClientPanelVisibility,panel:A.ControlPanel,visible:e})}updateWelcomePanelVisibility(e){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateClientPanelVisibility,panel:A.WelcomePanel,visible:e})}navigateToPauseScreen(){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.OnNavigateFromEditor,destination:B.PauseScreen})}navigateToDocumentation(){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.OnNavigateFromEditor,destination:B.Documentation})}navigateToFeedback(){this._dispatcher.dispatchEvent(b.ServerUXEvents,{type:C.OnNavigateFromEditor,destination:B.Feedback})}}function H(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}class W{constructor(e,t,n,s){this.eventDispatcher=e,this.dataStoreEventListener=t,this.eventListener=n,this.player=s,this.actionMapping=new Map,this.unregisterListeners=[],this.activeToolId="",this.createAction=e=>{const t=H(),i={...e,id:t};return this.eventDispatcher.dispatchEvent(b.ServerActionEvents,{type:f.Register,id:i.id,actionType:i.actionType}),this.actionMapping.set(t,{action:i}),i},this.teardown=()=>{for(const e of this.unregisterListeners)e()},this.onClientEvent=e=>{if(e.type===c.ActionExecute){const t=this.actionMapping.get(e.id);if(t){const n=t.action;if(n.actionType===e.payload.type)switch(e.payload.type){case i.NoArgsAction:n.onExecute();break;case i.MouseRayCastAction:{const t={direction:e.payload.mouseRay.direction,location:e.payload.mouseRay.location,cursorBlockLocation:e.payload.mouseRay.cursorBlockLocation,rayHit:e.payload.mouseRay.rayHit};n.onExecute(t,e.payload.mouseProps)}}}}},this.unregisterListeners.push(this.dataStoreEventListener.registerListener(v.ClientActionEvents,this.onClientEvent)),this.unregisterListeners.push(this.eventListener.registerListener(v.ClientActionEvents,this.player,this.onClientEvent))}}class j{constructor(e,t){this.inputService=e,this.eventDispatcher=t,this._sendUnregisterMouseBindingEvent=this._sendUnregisterMouseBindingEvent.bind(this),this.unregisterAllBindings=this.unregisterAllBindings.bind(this),this._bindingCleanupHandles=[],this._sendUnregisterMouseBindingEvent.bind(this)}_sendRegisterKeyBindingEvent(e,t,i,n){const s=n?n.uniqueId:H(),o=i.key===p.UNDEFINED?r.Unused:i.modifier??r.None;return this.inputService.registerKeyBinding(e,s,i.key,o,{canRebind:void 0!==n&&""!==n.uniqueId,actionId:t.id,label:n?n.label:void 0,tooltip:n?n.tooltip:void 0}),()=>{this.inputService.unregisterKeyBinding(e,s)}}_sendRegisterMouseBindingEvent(e,t,i){return this.eventDispatcher.dispatchEvent(b.ServerInputBindingEvents,{type:E.RegisterMouseBinding,inputDevice:n.Mouse,contextId:e,actionId:t,mouseAction:i}),()=>{this._sendUnregisterMouseBindingEvent(e,t)}}_sendUnregisterMouseBindingEvent(e,t){this.eventDispatcher.dispatchEvent(b.ServerInputBindingEvents,{type:E.Unregister,inputDevice:n.Mouse,contextId:e,actionId:t})}unregisterAllBindings(){this._bindingCleanupHandles.forEach((e=>e())),this._bindingCleanupHandles=[]}_addBindingCleanupHandle(e){this._bindingCleanupHandles.push(e)}}class X extends j{constructor(e,t,i){super(e,t),this._inputContext=i}registerMouseWheelBinding(e,t){this._addBindingCleanupHandle(this._sendRegisterMouseBindingEvent(t??this._inputContext,e.id,l.Wheel))}registerMouseButtonBinding(e,t){this._addBindingCleanupHandle(this._sendRegisterMouseBindingEvent(t??this._inputContext,e.id,l.Button))}registerMouseDragBinding(e,t){this._addBindingCleanupHandle(this._sendRegisterMouseBindingEvent(t??this._inputContext,e.id,l.Drag))}registerKeyBinding(e,t,i,n){this._addBindingCleanupHandle(this._sendRegisterKeyBindingEvent(n??this._inputContext,e,t,i))}unregisterBindings(){this.unregisterAllBindings()}}class G extends j{constructor(e,t){super(e,t)}registerKeyBinding(e,t,i,n){this._addBindingCleanupHandle(this._sendRegisterKeyBindingEvent(e,t,i,n))}}var $;!function(e){e.GlobalEditor="global.editor",e.GlobalToolMode="global.toolMode",e.Viewport="local.toolMode.viewport"}($||($={}));class Q{constructor(e,t){this._player=e,this._tagList=t}info(e){U.editor.log.info(e,{tags:this._tagList,player:this._player})}warning(e){U.editor.log.warning(e,{tags:this._tagList,player:this._player})}error(e){U.editor.log.error(e,{tags:this._tagList,player:this._player})}debug(e){U.editor.log.debug(e,{tags:this._tagList,player:this._player})}}class J{constructor(e){this.listeners={[v.ClientActionEvents]:[],[v.ClientUXEvents]:[],[v.ClientLifecycleEvents]:[]},this.onPayload=e=>{const t=e.dataTag;switch(t){case v.ClientActionEvents:if(e.payload){const i=JSON.parse(e.payload);for(const e of this.listeners[t])e(i)}break;case v.ClientUXEvents:case v.ClientLifecycleEvents:break;default:return}},this.unregisterListener=(e,t)=>{const i=this.listeners[e];i.splice(i.indexOf(t),1)},this.payloadCallback=e.afterEvents.payloadReceived.subscribe(this.onPayload)}registerListener(e,t){return this.listeners[e].push(t),()=>{this.unregisterListener(e,t)}}teardown(e){this.payloadCallback&&(e.afterEvents.payloadReceived.unsubscribe(this.payloadCallback),this.payloadCallback=void 0)}}class Z{constructor(e,t,i,n){this._clientDispatcher=e,this._id=H(),this._typeName=i,this._paneId=t,this._visible=n?.visible??!0,this._enable=n?.visible??!0}get id(){return this._id}get paneId(){return this._paneId}get typeName(){return this._typeName}get enable(){return this._enable}set enable(e){this._enable=e,this.sendPropertyUpdate()}get visible(){return this._visible}set visible(e){this._visible=e,this.sendPropertyUpdate()}sendPropertyUpdate(){const e={type:C.UpdatePropertyItem,...this.createPayload()};this._clientDispatcher.dispatchEvent(b.ServerUXEvents,e)}dispose(){}}class q extends Z{constructor(e,t,i,n,s){super(t,i,n,s),this._observable=e,this._observable.handle.subscribe({subscriber:this,onReceiveUpdate:(e,t)=>{this.onValueChanged(e,t)},onDispatchUpdate:()=>{this.sendPropertyUpdate()}})}get value(){return this._observable.handle.value}dispose(){super.dispose(),this._observable.handle.unsubscribe(this),this._observable.release()}}class ee extends q{constructor(e,t,i,n){super(e,t,i,I.Boolean,n),this._hiddenLabel=!1,this._variant=x.Checkbox,n&&(this._title=n.title,this._tooltip=n.tooltip,this._onChange=n.onChange,void 0!==n.variant&&(this._variant=n.variant),void 0!==n.hiddenLabel&&(this._hiddenLabel=n.hiddenLabel))}setTitle(e){this._title=e,this.sendPropertyUpdate()}setTooltip(e){this._tooltip=e,this.sendPropertyUpdate()}onValueChanged(e,t){this._onChange?.(e,t)}createPayload(){return{id:this.id,typeName:I.Boolean,enable:this.enable,visible:this.visible,paneId:this.paneId,value:this.value,observableValueId:this._observable.handle.id,propertyItemOptions:{variant:this._variant,title:this._title,tooltip:this._tooltip,hiddenLabel:this._hiddenLabel}}}}class te extends Z{constructor(e,t,i,n){super(e,t,I.Button,n),this._action=i,this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.BindActionToControl,actionId:this._action.id,controlId:this.id}),n&&(this._title=n.title,this._variant=n.variant,this._tooltip=n.tooltip,this._icon=n.icon,this._hiddenLabel=n.hiddenLabel)}replaceAction(e){this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.RemoveActionBindingFromControl,actionId:this._action.id,controlId:this.id}),this._action=e,this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.BindActionToControl,actionId:this._action.id,controlId:this.id})}setTitle(e){this._title=e,this.sendPropertyUpdate()}setTooltip(e){this._tooltip=e,this.sendPropertyUpdate()}setIcon(e){this._icon=e,this.sendPropertyUpdate()}createPayload(){return{id:this.id,typeName:I.Button,enable:this.enable,visible:this.visible,paneId:this.paneId,propertyItemOptions:{title:this._title,tooltip:this._tooltip,icon:this._icon,variant:this._variant,hiddenLabel:this._hiddenLabel}}}}class ie extends Z{constructor(e,t){super(e,t,I.Divider)}createPayload(){return{id:this.id,typeName:I.Divider,enable:this.enable,visible:this.visible,paneId:this.paneId}}}class ne extends q{constructor(e,t,i,n){super(e,t,i,I.Image,n),this._height=10,this._width=10,this._alignment=g.Left,n&&(n.imageSize&&("number"==typeof n.imageSize?this._height=this._width=n.imageSize:(this._height=n.imageSize.height,this._width=n.imageSize.width)),n.alignment&&(this._alignment=n.alignment),this._onClick=n.onClick)}get imageWidth(){return this._width}get imageHeight(){return this._height}onClick(e,t){this._onClick?.(e,t)}resizeImage(e,t){this._width=e,this._height=t,this.sendPropertyUpdate()}onValueChanged(){}createPayload(){return{id:this.id,typeName:I.Image,enable:this.enable,visible:this.visible,paneId:this.paneId,value:"string"==typeof this.value?{path:this.value,type:w.Default}:this.value,propertyItemOptions:{imageHeight:this._height,imageWidth:this._width,alignment:this._alignment,clickable:!!this._onClick}}}}var se=s(378),oe=s.n(se);class re{constructor(){this._dispatcher=void 0,this._id=H()}get id(){return this._id}setDispatcher(e){if(this._dispatcher&&void 0!==e)throw Error("Observable already has a dispatcher.");this._dispatcher=e}}class ae extends re{constructor(e,t){if(super(),this._subscribers=[],this._validator=void 0,e instanceof re)throw Error("Observable objects cannot be assigned to another observable.");this._data=he(e),this._validator=t}set(e,t){const i=this._validator?this._validator.validate(e):e;if(oe()(this.value,i))return!1;const n=he(this.value);if(this._data=he(i),this.dispatchChange(),t&&t.notify){const e=he(this._data);t.deferredNotification?this._dispatcher&&this._dispatcher.dispatch((()=>this.notifyChange(e,n))):this.notifyChange(e,n)}return!0}get value(){return this._data}get subscriberCount(){return this._subscribers.length}get validator(){return this._validator}dispatchChange(){this._subscribers.forEach((e=>{e.onDispatchUpdate?.(this.value)}))}notifyChange(e,t){this._subscribers.forEach((i=>{i.onReceiveUpdate?.(e,t)}))}assignValidator(e){this._validator=e}subscribe(e){this._subscribers.push(e)}unsubscribe(e){const t=this._subscribers.findIndex((t=>t.subscriber===e));-1!==t&&this._subscribers.splice(t,1)[0]}}function le(e){return function(e){return e instanceof re}(e)?e:new ae(e)}function he(e){return"object"==typeof e?{...e}:e}function de(e,t){return new ae(e,t)}class pe{constructor(e,t){this._registry=e,this._handle=t,this._isReleased=!1}get handle(){return this._handle}release(){this._isReleased||this._registry.release(this._handle)}}class ce{constructor(e){this._system=e,this._registry=new Map,this._eventQueue=void 0,this._eventCallbackHandle=void 0}update(e,t){const i=this._registry.get(e);i&&i.observable.set(t,{notify:!0})}processEvents(){this._eventQueue&&(this._eventQueue.forEach((e=>{e()})),this._eventQueue=void 0)}add(e){const t=this._registry.get(e.id);return t?t.count+=1:(this._registry.set(e.id,{observable:e,count:1}),e.setDispatcher({dispatch:t=>{this._registry.has(e.id)&&this._enqueueDeferredEvent(t)}})),new pe(this,e)}has(e){return this._registry.has(e.id)}release(e){const t=this._registry.get(e.id);t&&(t.count-=1,0===t.count&&(e.setDispatcher(void 0),this._registry.delete(e.id)))}teardown(){this._eventCallbackHandle&&this._system.clearRun(this._eventCallbackHandle)}_enqueueDeferredEvent(e){this._eventQueue||(this._eventQueue=[],this._system.run((()=>this.processEvents()))),this._eventQueue.push(e)}}function _e(e,t){const i=le(t);return e.add(i)}var ue,ge,me=s(79);class ye{constructor(e,t){this._min={},this._max={},this.updateLimits(e,t)}validate(e){return me.Vector3Utils.clamp(e,{min:this._min,max:this._max})}updateLimits(e,t){const i=be(e,t);this._min=i.min,this._max=i.max}}function be(e,t){const i={...e},n={...t};return void 0!==e.x&&void 0!==t.x&&e.x>t.x&&(i.x=t.x,n.x=e.x),void 0!==e.y&&void 0!==t.y&&e.y>t.y&&(i.y=t.y,n.y=e.y),void 0!==e.z&&void 0!==t.z&&e.z>t.z&&(i.z=t.z,n.z=e.z),{min:i,max:n}}class ve extends q{constructor(e,t,i,n){if(super(e,t,i,I.Vector3,n),this._hiddenLabel=!1,this._min={},this._max={},n){this._title=n.title,this._tooltip=n.tooltip,n.hiddenLabel&&(this._hiddenLabel=n.hiddenLabel);const e=be(n.min??{},n.max??{});this._min=e.min,this._max=e.max,this._onChange=n.onChange}this._updateLimitValidator()}updateAxisLimits(e){const t=be(e.min??{},e.max??{});this._min=t.min,this._max=t.max,this._updateLimitValidator(),this._observable.handle.set({...this.value},{notify:!0,deferredNotification:!0})}createPayload(){return{id:this.id,typeName:I.Vector3,enable:this.enable,visible:this.visible,paneId:this.paneId,observableValueId:this._observable.handle.id,value:this.value,propertyItemOptions:{title:this._title,tooltip:this._tooltip,hiddenLabel:this._hiddenLabel,maxX:this._max.x,maxY:this._max.y,maxZ:this._max.z,minX:this._min.x,minY:this._min.y,minZ:this._min.z}}}onValueChanged(e,t){this._onChange?.(e,t)}dispose(){super.dispose()}_updateLimitValidator(){const e=this._min,t=this._max;if(0!==Object.entries(e).length||0!==Object.entries(t).length)if(this._observable.handle.validator){if(!(this._observable.handle.validator instanceof ye))throw Error("Expected Vector3LimitObservableValidator to limit IVector3PropertyItem value");this._observable.handle.validator.updateLimits({...e},{...t})}else this._observable.handle.assignValidator(new ye({...e},{...t})),this._observable.handle.set(this.value)}}class fe extends q{constructor(e,t,i,n){super(e,t,i,I.Text,n),this._hasBorder=!0,this._alignment=g.Left,n&&(this._title=n.title,void 0!==n.border&&(this._hasBorder=n.border),void 0!==n.alignment&&(this._alignment=n.alignment))}setTitle(e){this._title=e,this.sendPropertyUpdate()}setAlignment(e){this._alignment=e,this.sendPropertyUpdate()}onValueChanged(){}createPayload(){return{id:this.id,typeName:I.Text,enable:this.enable,visible:this.visible,paneId:this.paneId,value:this.value,propertyItemOptions:{title:this._title,border:this._hasBorder,alignment:this._alignment}}}}function Ee(e){return void 0!==e&&"pane"in e}!function(e){e.File="editor:menu:file",e.Edit="editor:menu:edit",e.Extensions="editor:menu:extensions",e.View="editor:menu:view",e.WorldOptions="editor:menu:worldOptions",e.Experimental="editor:menu:experimental",e.Help="editor:menu:help"}(ue||(ue={})),function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(ge||(ge={}));class Ce{get visible(){const e=this._getProperty("visible");return"boolean"==typeof e&&e}get enabled(){const e=this._getProperty("enabled");return"boolean"==typeof e&&e}hide(){this._sendUpdateMessage({visible:!1})}show(){this._sendUpdateMessage({visible:!0})}dispose(){this._sendDestroyMessage()}}class Pe extends Ce{constructor(e,t,i,n){if(super(),this._dataStore=t,this._parent=n,"string"==typeof e)this._id=e;else{if(void 0!==e.uniqueId){if(""===e.uniqueId||this._dataStore.menuContainer.hasPayload(e.uniqueId))throw Error(`Cannot create a menu with id '${e.uniqueId}'.`);this._id=e.uniqueId}else this._id=H();const t={id:this._id,parentId:this._parent?.id,label:e.label,enabled:e.enabled??!0,visible:!0,checked:e.checked};if(this._dataStore.menuContainer.createItem(this._id,JSON.stringify(t)),i){const e={actionId:i,controlId:this._id};this._dataStore.actionContainer.bindActionToControl(this._id,JSON.stringify(e))}}}get id(){return this._id}get submenu(){return(this._getChildrenIds()??[]).map((e=>new Pe(e,this._dataStore)))}get label(){const e=this._getProperty("label");return"string"==typeof e?e:""}set label(e){this._sendUpdateMessage({label:e})}get checked(){const e=this._getProperty("checked");return"boolean"==typeof e?e:void 0}set checked(e){this._dataStore.menuContainer.hasProperty(this._id,"children")||this._sendUpdateMessage({checked:e})}set enabled(e){this._sendUpdateMessage({enabled:e})}dispose(){this.submenu.forEach((e=>e.dispose())),super.dispose()}addItem(e,t){const i=new Pe(e,this._dataStore,t?.id,this),n=this._getChildrenIds()??[];return n.push(i.id),this._sendUpdateMessage({children:n}),i}replaceAction(e){const t={actionId:e.id,controlId:this._id};this._dataStore.actionContainer.removeActionFromControl(this._id),this._dataStore.actionContainer.bindActionToControl(this._id,JSON.stringify(t))}_sendUpdateMessage(e){this._dataStore.menuContainer.updateItem(this.id,JSON.stringify(e))}_sendDestroyMessage(){this._dataStore.menuContainer.destroyItem(this._id),this._dataStore.actionContainer.removeActionFromControl(this._id)}_getProperty(e){return this._dataStore.menuContainer.getProperty(this.id,e)}_getChildrenIds(){return function(e){if(e&&"string"==typeof e)return JSON.parse(e)}(this._getProperty("children"))}_removeChild(e){const t=this._getChildrenIds()??[];this._sendUpdateMessage({children:t.filter((t=>t!==e.id))}),this._dataStore.menuContainer.destroyItem(e.id)}}class Ie{constructor(e){this._dataStore=e,this._topMenus=[],this._menuQueryTickHandles=[]}teardown(){this._menuQueryTickHandles.forEach((e=>O.system.clearRun(e))),this._topMenus.forEach((e=>e.dispose()))}createMenu(e){const t=new Pe(e,this._dataStore);return this._topMenus.push(t),t}async getMenu(e){let t,i=!1;return new Promise(((n,s)=>{const o=()=>{t&&this._menuQueryTickHandles.filter((e=>e!==t)),this._dataStore.menuContainer.hasPayload(e)?n(new Pe(e,this._dataStore)):i?s(new Error(`Unable to retrieve the menu '${e}' in the following tick`)):(t=O.system.run(o),this._menuQueryTickHandles.push(t),i=!0)};o()}))}}class Se{constructor(e){this._event=e}unsubscribe(){this._event.unsubscribe(this)}}class Te{constructor(){this.handlers=new Map}subscribe(e){const t=new Se(this);return this.handlers.set(t,e),t}unsubscribe(e){this.handlers.delete(e)}trigger(e){this.handlers.forEach((t=>t(e)))}}function xe(e){return void 0!==e&&"propertyItemOptions"in e}function we(e){return e.typeName===I.Vector3&&Be(e.value)}function Me(e){return e.typeName===I.Table}function De(e){return e.typeName===I.BlockList}const Be=e=>{const t=e;return"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.z},Ae=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e&&!(e=>e instanceof O.BlockType)(e);function Ue(e,t){const i=new Proxy(e,t);return Object.assign(i,{__isProxy:!0})}function Oe(e,t){const i=e;if(i){const e=Ue(t,{get(e,t){const n=e[t];return Ae(n)&&!("__isProxy"in n)&&(e[t]=ke(n,i,t)),e[t]},set(e,t,n){const s=e[t];if(e[t]=n,"__isProxy"!==t){const e=i.findPropertyRecursive(t);xe(e)&&s!==n&&e.sendPropertyUpdate()}return!0}});return Object.assign(e,t),e}return t}const ke=(e,t,i)=>{const n={get(e,n){const s=e[n];return Ae(s)&&!("__isProxy"in s)&&(e[n]=ke(s,t,i)),e[n]},set(e,n,s){const o=e[n];if(e[n]=s,"__isProxy"!==n){const e=t.findPropertyRecursive(i);xe(e)&&o!==s&&e.sendPropertyUpdate()}return!0}};return Ue(e,n)};class Ne{constructor(){this._visible=!0,this._enabled=!0,this._disposed=!1}get visible(){return this._visible}get enabled(){return this._enabled}hide(){this._visible=!1,this.update(!0)}show(){this._visible=!0,this.update()}get disposed(){return this._disposed}set disposed(e){this._disposed=e}dispose(){this._sendDestroyMessage(),this._disposed=!0}update(e){(e||!this.disposed&&this.visible)&&this._sendUpdateMessage()}}const Re=new Set(["area_effect_cloud","xp_bottle","xp_orb","arrow","dragon_fireball","egg","ender_dragon","ender_pearl","eye_of_ender_signal","fireball","fireworks_rocket","fishing_hook","llama_spit","lightning_bolt","lingering_potion","player","shulker_bullet","small_fireball","snowball","splash_potion","thrown_trident","tnt","villager","wither_skull","wither_skull_dangerous","zombie_villager","agent","editor:map_marker","tripod_camera","minecart","chest_minecart","hopper_minecart","command_block_minecart","tnt_minecart","ravager","ender_crystal","breeze_wind_charge_projectile","wind_charge_projectile","ominous_item_spawner"]);const Le=function(){const e=[];for(const t of O.EntityTypes.getAll()){const i=t.id.replace("minecraft:","");Re.has(i)||e.push(i)}return e}().sort(((e,t)=>e.localeCompare(t))),Ve={empty:"empty"};class ze extends Ne{constructor(e,t,i){super(),this._paneContext=e,this.onPropertyPaneVisibilityUpdated=new Te,this._id=H(),i||(this._visible=!1),this._title=t.title,this._parentPaneId=i,this._collapsed=!1,this._direction=t.direction,this._propertyItems=[]}setPropertyItemValue(e,t){const i=this.findProperty(e);if(i){const e=i.value;if(function(e){return e.typeName===I.BlockPicker&&"string"==typeof e.value&&xe(e)&&void 0!==e.propertyItemOptions&&"pickerType"in e.propertyItemOptions}(i)){const e=t,n=i.propertyItemOptions,s=e.includes(":")?e:`minecraft:${e}`;if(n.pickerType===D.Block){const e=O.BlockTypes.get(s);t=e?.id}else if(n.pickerType===D.Entity){const e=O.EntityTypes.get(s);t=e?.id}}else if(we(i)&&Be(t)){const e=i.propertyItemOptions??{};t={...me.Vector3Utils.clamp(t,{min:{x:e.minX,y:e.minY,z:e.minZ},max:{x:e.maxX,y:e.maxY,z:e.maxZ}})}}else if(De(i)){const e=[...t],i=new Set;t=e.filter((e=>!i.has(e)&&(void 0!==O.BlockTypes.get(e)&&(i.add(e),!0))))}Ae(t)?Object.assign(i.obj[i.property],t):i.obj[i.property]=t,void 0!==i.propertyItemOptions&&void 0!==i.propertyItemOptions.onChange&&i.propertyItemOptions.onChange(i.obj,i.property,e,t)}}get id(){return this._id}get parentPaneId(){return this._parentPaneId}get propertyItems(){return this._propertyItems}get title(){return this._title}set title(e){this._title=e}get collapsed(){return this._collapsed}get direction(){return this._direction}get visible(){return this._visible}findPropertyItem(e){return this._propertyItems.find((t=>t.id===e))}findProperty(e){const t=this._propertyItems.find((t=>"property"in t&&t.property===e));return t instanceof Xe?t:void 0}findPropertyRecursive(e){return function(e,t){for(const i of t)if(!(i instanceof Z)){if(i.property===e)return i;if(i.typeName===I.SubPane&&xe(i)&&Ee(i.propertyItemOptions)){const t=i.propertyItemOptions.pane;if(t){const i=t.findPropertyRecursive(e);if(i)return i}}}}(e,this._propertyItems)}createPropertyPane(e){const t=this._paneContext.subPaneFactory(e,this._id),i={pane:t},n=new Xe(this._paneContext.clientDispatcher,Ve,"empty",this._id,I.SubPane,i);return this._propertyItems.push(n),t}removePropertyPane(e){for(let t=0;t<this._propertyItems.length;++t){const i=this._propertyItems[t];if(i.typeName===I.SubPane&&i instanceof Xe&&xe(i)&&Ee(i.propertyItemOptions)&&i.propertyItemOptions.pane instanceof ze&&i.propertyItemOptions.pane.id===e.id)return this._propertyItems.splice(t,1),!0}return!1}hide(){const e=this._visible;super.hide(),e&&this.onPropertyPaneVisibilityUpdated.trigger({isVisible:this._visible})}show(){const e=!this._visible;super.show(),e&&this.onPropertyPaneVisibilityUpdated.trigger({isVisible:this._visible})}collapse(){this._collapsed=!0,this.update()}expand(){this._collapsed=!1,this.update()}addString(e,t,i){const n=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.String,i);return this._propertyItems.push(n),n}addBool_deprecated(e,t,i){const n=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.Boolean,i);return this._propertyItems.push(n),n}addBool(e,t){const i=_e(this._paneContext.observableRegistry,e),n=new ee(i,this._paneContext.clientDispatcher,this._id,t);return this._propertyItems.push(n),n}addNumber(e,t,i){const n=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.Number,i);return this._propertyItems.push(n),n}addBlockPicker(e,t,i){const n=i??{};n.pickerType=D.Block,n.allowedEntries=i&&void 0===i.allowedEntries?N:i?.allowedEntries,this._width=this._width&&this._width>=36?this._width:36;const s=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.BlockPicker,n);return this._propertyItems.push(s),s}addEntityPicker(e,t,i){const n=i??{};n.pickerType=D.Entity,n.allowedEntries=i&&void 0===i.allowedEntries?Le:i?.allowedEntries,this._width=this._width&&this._width>=36?this._width:36;const s=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.BlockPicker,n);return this._propertyItems.push(s),s}addColorPicker(e,t,i){const n=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.ColorPicker,i);return this._propertyItems.push(n),n}addButton(e,t){const n="function"==typeof e?this._paneContext.actionManager.createAction({actionType:i.NoArgsAction,onExecute:e}):e,s=new te(this._paneContext.clientDispatcher,this._id,n,t);return this._propertyItems.push(s),s}addDropdown(e,t,i){const n=new Ge(this._paneContext.clientDispatcher,e,t,this._id,I.Dropdown,i);return this._propertyItems.push(n),n}addDivider(){const e=new ie(this._paneContext.clientDispatcher,this._id);return this._propertyItems.push(e),e}addVector3(e,t){const i=_e(this._paneContext.observableRegistry,e),n=new ve(i,this._paneContext.clientDispatcher,this._id,t);return this._propertyItems.push(n),n}addVector3_deprecated(e,t,i){const n=new Xe(this._paneContext.clientDispatcher,e,t,this._id,I.Vector3,i);return this._propertyItems.push(n),n}addText(e,t){const i=_e(this._paneContext.observableRegistry,e),n=new fe(i,this._paneContext.clientDispatcher,this._id,t);return this._propertyItems.push(n),n}addImage(e,t){const i=_e(this._paneContext.observableRegistry,e),n=new ne(i,this._paneContext.clientDispatcher,this._id,t);return this._propertyItems.push(n),n}addTable(e){const t=new $e(this._paneContext.clientDispatcher,{EMPTY:void 0},"EMPTY",this._id,I.Table,e);return this._propertyItems.push(t),t}addBlockList(e){const t=new Qe(this._paneContext.clientDispatcher,{EMPTY:void 0},"EMPTY",this._id,I.BlockList,e);return this._propertyItems.push(t),t}_sendUpdateMessage(){var e;this._paneContext.clientDispatcher.dispatchEvent(b.ServerUXEvents,(e=this,{type:C.UpdatePropertyPane,id:e.id,parentPaneId:e.parentPaneId,title:e.title,visible:e.visible,collapsed:e.collapsed,propertyItems:je(e.propertyItems)}),Fe)}dispose(){this.propertyItems.forEach((e=>{e.dispose()})),super.dispose()}_sendDestroyMessage(){this._paneContext.clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.DestroyPropertyPane,id:this._id})}}function Ke(e,t){return typeof e==typeof t?e:t}function Ye(e){return e?{title:e.title}:{}}function Fe(e,t){return t?.constructor?.name===O.BlockType.name?t.id:"_obj"!==e?t:void 0}function He(e){switch(e.typeName){case I.Text:throw Error("Property Bag Text is not supported.");case I.String:return{...We(e),typeName:e.typeName,value:Ke(e.value,""),propertyItemOptions:Ye(e.propertyItemOptions)};case I.Number:{const t=e.propertyItemOptions;return{...We(e),typeName:e.typeName,value:Ke(e.value,0),propertyItemOptions:t?{...Ye(e.propertyItemOptions),isFloat:t.isFloat,max:t.max,min:t.min,showSlider:t.showSlider}:{}}}case I.Boolean:{const t=e.propertyItemOptions;return{...We(e),typeName:e.typeName,value:Ke(e.value,!1),propertyItemOptions:t?{...Ye(e.propertyItemOptions),variant:t.displayAsToggleSwitch?x.ToggleSwitch:x.Checkbox}:{}}}case I.BlockPicker:{const t=e.propertyItemOptions,i="air",n="pig";return{...We(e),typeName:e.typeName,value:Ke(e.value,""),propertyItemOptions:t?{...Ye(e.propertyItemOptions),pickerType:t.pickerType??D.Block,allowedEntries:t.allowedEntries??[],defaultValue:t.pickerType===D.Block?i:n}:{pickerType:D.Block}}}case I.ColorPicker:{const t=e.propertyItemOptions,i=e.value??{red:0,green:0,blue:0,alpha:1};return{...We(e),typeName:e.typeName,value:{red:(0,me.clampNumber)(Ke(i.red,0),0,1),green:(0,me.clampNumber)(Ke(i.green,0),0,1),blue:(0,me.clampNumber)(Ke(i.blue,0),0,1),alpha:(0,me.clampNumber)(Ke(i.alpha,1),0,1)},propertyItemOptions:t?{...Ye(e.propertyItemOptions),showAlpha:t.showAlpha,variant:t.variant??T.Default}:{variant:T.Default}}}case I.Dropdown:{const t=e.propertyItemOptions,i={...We(e),typeName:e.typeName,value:Ke(e.value,0),propertyItemOptions:t?{...Ye(e.propertyItemOptions),dropdownItems:t.dropdownItems?t.dropdownItems.map((e=>({label:e.label,value:Ke(e.value,0)}))):[]}:{dropdownItems:[]}};return i}case I.Divider:throw Error("Property Bag Divider is not supported.");case I.SubPane:if(Ee(e.propertyItemOptions)&&e.propertyItemOptions.pane instanceof ze){return{...We(e),typeName:e.typeName,propertyItemOptions:{pane:(t=e.propertyItemOptions.pane,{id:t.id,parentPaneId:t.parentPaneId,title:t.title,visible:t.visible,collapsed:t.collapsed,direction:t.direction,propertyItems:je(t.propertyItems)})}}}throw new Error("Cannot create SubPane item without pane data");case I.Button:throw Error("Property Bag Button is not supported.");case I.Vector3:{const t=e.propertyItemOptions,i=e.value??{x:0,y:0,z:0};return{...We(e),typeName:e.typeName,value:{x:Ke(i.x,0),y:Ke(i.y,0),z:Ke(i.z,0)},propertyItemOptions:t?{...Ye(e.propertyItemOptions),maxX:t.maxX,maxY:t.maxY,maxZ:t.maxZ,minX:t.minX,minY:t.minY,minZ:t.minZ}:{}}}case I.Image:throw Error("PropertyBag Image property item is not supported");case I.Table:{const t=e.propertyItemOptions;return{...We(e),typeName:e.typeName,value:"",propertyItemOptions:t?{...Ye(e.propertyItemOptions),defaultData:t.defaultData?t.defaultData.map((e=>e.map((e=>({...e}))))):[],titleId:t.titleId}:{defaultData:[],titleId:""}}}case I.BlockList:{const t=e.propertyItemOptions;return{...We(e),typeName:e.typeName,value:"",propertyItemOptions:t?{...Ye(e.propertyItemOptions),blocks:t.blockList}:{blocks:[]}}}default:Y(e.typeName)}var t}function We(e){return{paneId:e.paneId,id:e.id,property:e.property,visible:e.visible,enable:e.enable}}function je(e){return e.reduce(((e,t)=>(t instanceof Z?e.push(t.createPayload()):t instanceof Xe&&e.push(He(t)),e)),[])}class Xe{constructor(e,t,i,n,s,o,r){this._clientDispatcher=e,this.action=r,this._id=H(),this._obj=t,this._property=i,this._typeName=s,this._paneId=n,this._propertyItemOptions=o,this._visible=o?.visible??!0,this._enable=o?.enable??!0,this.action&&this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.BindActionToControl,actionId:this.action.id,controlId:this.id})}replaceBoundAction(e){this.action&&this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.RemoveActionBindingFromControl,actionId:this.action.id,controlId:this.id}),e&&(this.action=e,this._clientDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.BindActionToControl,actionId:this.action.id,controlId:this.id}))}updateAxisLimits(e){if(we(this)){const t=this.value;this._propertyItemOptions={...this.propertyItemOptions,...e},this._obj[this._property]={...me.Vector3Utils.clamp(this.value,{min:{x:e.minX,y:e.minY,z:e.minZ},max:{x:e.maxX,y:e.maxY,z:e.maxZ}})},this.sendPropertyUpdate(),this._propertyItemOptions.onChange?.(this._obj,this._property,t,this.value)}else U.editor.log.error("Component type does not support updateAxisLimits")}get id(){return this._id}get paneId(){return this._paneId}get obj(){return this._obj}get property(){return this._property}get typeName(){return this._typeName}get propertyItemOptions(){return this._propertyItemOptions}get enable(){return this._enable}set enable(e){this._enable=e,this.sendPropertyUpdate()}get visible(){return this._visible}set visible(e){this._visible=e,this.sendPropertyUpdate()}get value(){return this._obj[this._property]}sendPropertyUpdate(){var e;this._clientDispatcher.dispatchEvent(b.ServerUXEvents,(e=this,{type:C.UpdatePropertyItem,...He(e)}),Fe)}dispose(){}}class Ge extends Xe{updateDropdownItems(e,t=0){this.typeName===I.Dropdown?(this._obj[this._property]=(0,me.clampNumber)(t,0,Math.max(e.length-1,0)),this.propertyItemOptions?this.propertyItemOptions.dropdownItems=e:this.propertyItemOptions={dropdownItems:e},this.sendPropertyUpdate(),this._propertyItemOptions?.onChange?.(this._obj,this._property,-1,this.value)):U.editor.log.error("Component type does not support updateDropdownItems")}}class $e extends Xe{updateTable(e){if(Me(this)){const t=this.propertyItemOptions?.defaultData;this.propertyItemOptions?this.propertyItemOptions.defaultData=e:this.propertyItemOptions={defaultData:e},this.sendPropertyUpdate(),this._propertyItemOptions?.onChange?.(this._obj,this._property,t,this.propertyItemOptions.defaultData)}else U.editor.log.error("Component type does not support updateTable")}updateRow(e,t){if(Me(this)){const i=this.propertyItemOptions?.defaultData;i&&t>=0&&t<i.length?(i[t]=e,this.updateTable(i)):U.editor.log.error("Data is not available")}else U.editor.log.error("Component type does not support updateRow")}updateCell(e,t,i){if(Me(this)){const n=this.propertyItemOptions?.defaultData;if(n&&t>=0&&t<n.length&&i>=0&&i<n[0].length){const s=n?.map((e=>[...e]));s[t][i]=e,this.updateTable(s)}else U.editor.log.error("Data is not available")}}}class Qe extends Xe{updateBlockList(e){if(De(this)){const t=this.propertyItemOptions?.blockList;this.propertyItemOptions?this.propertyItemOptions.blockList=e:this.propertyItemOptions={blockList:e},this.sendPropertyUpdate(),this._propertyItemOptions?.onChange?.(this._obj,this._property,t,this.propertyItemOptions.blockList)}else U.editor.log.error("Component type does not support updateBlockList")}}class Je extends Ne{constructor(e,t,i){super(),this._eventDispatcher=i,this._id=H(),this._alignment=e,this._size=t,this._text=""}get id(){return this._id}get text(){return this._text}set text(e){this._text=e,this.update()}_sendUpdateMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateStatusBarItem,id:this._id,alignment:this._alignment,size:this._size,enabled:this._enabled,visible:this._visible,text:this._text})}_sendDestroyMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.DestroyStatusBarItem,id:this._id})}}class Ze extends Ne{constructor(e,t,i,n,s,o){super(),this._eventDispatcher=e,this._inputService=t,this._groupId=s,this._actionId=o,this.onModalToolActivation=new Te,this._id=H(),this._parent=i,this._paneBound=void 0,this._modalToolParams={...n},this._modalToolParams.inputContextId&&(this._modalToolParams.inputContextId=`modalToolContextId:${this._modalToolParams.inputContextId}`),this._inputManager=new X(this._inputService,this._eventDispatcher,$.Viewport),this.update(),this._actionId&&this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.BindActionToControl,actionId:this._actionId,controlId:this._id})}get id(){return this._id}hide(){this._visible=!1,this.update()}show(){this._visible=!0,this.update()}dispose(){this._inputManager.unregisterBindings(),this._parent.removeTool(this._id),super.dispose()}bindPropertyPane(e){this._paneBound=e,this._sendUpdateMessage()}registerMouseButtonBinding(e){this._inputManager.registerMouseButtonBinding(e,this._modalToolParams.inputContextId??this.id)}registerMouseWheelBinding(e){this._inputManager.registerMouseWheelBinding(e,this._modalToolParams.inputContextId??this.id)}registerMouseDragBinding(e){this._inputManager.registerMouseDragBinding(e,this._modalToolParams.inputContextId??this.id)}registerKeyBinding(e,t,i){this._inputManager.registerKeyBinding(e,t,i,this._modalToolParams.inputContextId??this.id)}unregisterInputBindings(){this._inputManager.unregisterBindings()}onActiveToolUpdated(e){this.onModalToolActivation.trigger({isActiveTool:e}),this._paneBound&&(e?this._paneBound.show():this._paneBound.hide())}_sendUpdateMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateModalToolOption,id:this._id,icon:this._modalToolParams.icon?this._modalToolParams.icon:"",enabled:this.enabled,visible:this.visible,title:this._modalToolParams.title,tooltip:this._modalToolParams.tooltip,toolGroupId:this._groupId,paneId:this._paneBound?this._paneBound.id:void 0,inputContextId:this._modalToolParams.inputContextId,inputContextLabel:this._modalToolParams.inputContextLabel})}_sendDestroyMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.DestroyModalToolOption,id:this._id})}get groupId(){return this._groupId}}class qe extends Ne{constructor(e,t,i,n){super(),this._eventDispatcher=e,this._actionManager=t,this._inputService=i,this._defaultGroupId=n,this._currentTools=[],this._selectedToolId=void 0}dispose(){super.dispose(),this._currentTools.forEach((e=>{e.unregisterInputBindings()}))}get id(){return"editorUI:toolRail"}get currentTools(){return this._currentTools}get selectedOptionId(){return this._selectedToolId}setSelectedOptionId(e,t){const i=this._selectedToolId;this._selectedToolId=e,this._actionManager.activeToolId=this._selectedToolId;for(const e of this._currentTools)e.id===this._selectedToolId?e.onActiveToolUpdated(!0):e.id===i&&e.onActiveToolUpdated(!1);t&&i!==this._selectedToolId&&this.update()}addTool(e,t){const i=new Ze(this._eventDispatcher,this._inputService,this,e,this._defaultGroupId,t?.id);return this._currentTools.push(i),i}removeTool(e){this._currentTools=this._currentTools.filter((t=>t.id!==e))}_sendUpdateMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.UpdateModalToolContainer,enabled:this._enabled,visible:this._visible,selectedOptionId:this._selectedToolId})}_sendDestroyMessage(){this._eventDispatcher.dispatchEvent(b.ServerUXEvents,{type:C.DestroyModalToolContainer})}}class et extends Ce{constructor(e,t,i,n){if(super(),this._dataStore=t,this._id=e,n){if(!i)throw Error("Expected action to exist on ActionBarItem creation.");const e={id:this._id,label:n.label,icon:n.icon,enabled:n.enabled??!0,visible:!0,actionId:i,tooltipTitle:n.tooltipTitle,tooltipDescription:n.tooltipDescription};this._dataStore.actionBarContainer.registerItem(this._id,JSON.stringify(e));const t={actionId:i,controlId:this._id};this._dataStore.actionContainer.bindActionToControl(this._id,JSON.stringify(t))}else{if(!this._dataStore.actionBarContainer.hasItemPayload(this._id))throw Error("Unable to find ActionBarItem.")}}get id(){return this._id}get label(){const e=this._getProperty("label");return"string"==typeof e?e:""}getEnabled(){const e=this._getProperty("enabled");return"boolean"==typeof e&&e}setEnabled(e){this._sendPropertyUpdateMessage("enabled",e)}dispose(){super.dispose()}_sendUpdateMessage(e){this._dataStore.actionBarContainer.updateRegisteredItem(this.id,JSON.stringify(e))}_sendPropertyUpdateMessage(e,t){this._dataStore.actionBarContainer.updateRegisteredItemProperty(this.id,JSON.stringify(t),e)}_sendDestroyMessage(){this._dataStore.actionBarContainer.unregisterItem(this._id),this._dataStore.actionContainer.removeActionFromControl(this._id)}_getProperty(e){return this._dataStore.actionBarContainer.getItemProperty(this.id,e)}}class tt{constructor(e){this._dataStore=e,this._registeredItems=new Map}registerItem(e,t,i){const n=new et(e,this._dataStore,t.id,i);return this._registeredItems.set(e,n),n}unregisterItem(e){const t=this._registeredItems.get(e);t&&(t.dispose(),this._registeredItems.delete(e))}teardown(){this._registeredItems.forEach((e=>e.dispose())),this._registeredItems.clear()}}class it{constructor(e,t){this._extensionContext=e,this._clientEventDispatcher=t,this._propertyPanes=new Map,this.scratchStorage=void 0,this.createPropertyPaneInternal=(e,t)=>{const i=new ze({clientDispatcher:this._clientEventDispatcher,actionManager:this._actionManager,observableRegistry:this._observableRegistry,subPaneFactory:(e,t)=>this.createPropertyPaneInternal(e,t)},e,t);return this._propertyPanes.set(i.id,i),i},this._dataStore=U.editorInternal.getDataStore(this.extensionContext.player),this._inputService=U.editorInternal.getInputService(this.extensionContext.player),this._clientEventDispatcher.initialize(this.extensionContext.player),this._observableRegistry=new ce(O.system),this._eventSubscriptionCache=new L(O.world.afterEvents),this._inputManager=new G(this._inputService,this._clientEventDispatcher),this._logger=new Q(this.extensionContext.player,["Extension",this.extensionContext.extensionInfo.name]),this._builtInUIManager=new F(this._clientEventDispatcher),this._dataStoreEventListener=new J(this._dataStore),this._actionManager=new W(this._clientEventDispatcher,this._dataStoreEventListener,K(),this.extensionContext.player),this._modalToolContainer=new qe(this._clientEventDispatcher,this._actionManager,this._inputService,this._extensionContext.extensionInfo.defaultToolGroupId),this._menuContainer=new Ie(this._dataStore),this._actionBar=new tt(this._dataStore),this._clientUXListenerUnregister=K().registerListener(v.ClientUXEvents,this.extensionContext.player,(e=>{switch(e.type){case _.UpdateObservableValue:this._observableRegistry.update(e.id,e.newValue);break;case _.UpdatePropertyPane:{const t=this._propertyPanes.get(e.paneId);t&&t instanceof ze&&t.setPropertyItemValue(e.property,e.newValue);break}case _.PropertyPaneVisibilityChanged:{const t=this._propertyPanes.get(e.id);t&&(e.visibility?t.show():t.hide());break}case _.PropertyPaneCollapsedStateChanged:{const t=this._propertyPanes.get(e.id);t&&(e.collapsed?t.collapse():t.expand());break}case _.UpdateModalTool:this._modalToolContainer.setSelectedOptionId(e.id,!1);break;case _.PropertyItemClicked:{const t=this._propertyPanes.get(e.paneId);if(t){const i=t.findPropertyItem(e.id);i&&function(e){return e instanceof ne}(i)&&i.onClick(e.x,e.y)}break}default:Y(e)}}))}teardown(){this._inputManager.unregisterAllBindings(),this._extensionContext.cursor.resetToDefaultState(),this._actionManager.teardown(),this._modalToolContainer.dispose(),this._actionBar.teardown(),this._menuContainer.teardown(),this._clientUXListenerUnregister(),this._eventSubscriptionCache.teardown(),this._observableRegistry.teardown(),this._dataStoreEventListener.teardown(this._dataStore)}get toolRail(){return this._modalToolContainer}get menuBar(){return this._menuContainer}get actionBar(){return this._actionBar}createPropertyPane(e){return this.createPropertyPaneInternal(e)}createStatusBarItem(e,t){return new Je(e,t,this._clientEventDispatcher)}get actionManager(){return this._actionManager}get inputManager(){return this._inputManager}get log(){return this._logger}get extensionContext(){return this._extensionContext}get builtInUIManager(){return this._builtInUIManager}get eventSubscriptionCache(){return this._eventSubscriptionCache}}class nt{constructor(e,t){this._activate=e,this._shutdown=t,this.extensionContextToPlayerContext=new Map,this.onLifecycleEvent=(e,t)=>{switch(t.type){case u.OnInitialize:{const t=this.extensionContextToPlayerContext.get(e);if(!t)return void U.editor.log.error("Receiving lifecycle activation for an unknown player? Unable to activate extensions.",{player:e});void 0!==t.uiSession&&(U.editor.log.debug("Restarting UI session.",{player:e}),this._onSessionShutdown(t)),t.uiSession=new it(t.editorContext,t.playerEventDispatcher),t.disposables=this._activate(t.uiSession);break}}}}onNewPlayerJoin(e){if(this.extensionContextToPlayerContext.has(e.player)){U.editor.log.error("An existing extension is being reactivated for a player twice? Replacing old context and disposing existing session.",{player:e.player});const t=this.extensionContextToPlayerContext.get(e.player);t?.uiSession&&this._shutdown(t.uiSession),t?.lifecycleUnregister()}this.extensionContextToPlayerContext.set(e.player,{editorContext:e,uiSession:void 0,playerEventDispatcher:new V(O.system,U.editor.log),lifecycleUnregister:K().registerListener(v.ClientLifecycleEvents,e.player,(t=>{this.onLifecycleEvent(e.player,t)}))})}onPlayerLeave(e){const t=this.extensionContextToPlayerContext.get(e.player);t?(this._onSessionShutdown(t),t.playerEventDispatcher.flush(),t.lifecycleUnregister()):U.editor.log.error("No player context for the given player, unable to perform any clean up.",{player:e.player}),this.extensionContextToPlayerContext.delete(e.player)}_onSessionShutdown(e){e.disposables?.forEach((e=>e.teardown())),e.uiSession&&(this._shutdown(e.uiSession),e.uiSession.teardown(),e.uiSession=void 0)}}const st=new Map;function ot(e,t,i,n){if(st.has(e))throw new Error("Extension name already registered!");st.set(e,new nt(t,i));return U.editorInternal.registerExtension(e,(t=>{if(!st.has(e))throw new Error("Activating an extension that does not exist");st.get(e)?.onNewPlayerJoin(t)}),(t=>{if(!st.get(e))throw new Error("Shutting down an extension that does not exist");st.get(e)?.onPlayerLeave(t)}),n)}const rt=100;function*at(e,t,i,n){try{let e=0;for(const t of i)n(t),++e,e>rt&&(e=0,yield)}catch(e){t(e)}e()}async function lt(e,t){await new Promise((function(i,n){const s=e.getBlockLocationIterator();O.system.runJob(at(i,n,s,t))}))}async function ht(e,t){await new Promise((function(i,n){O.system.runJob(at(i,n,e,t))}))}class dt{constructor(e,t){this.nativeHandle=e,this.transactionManager=t}addUserDefinedOperation(e,t){const i=JSON.stringify(e);this.transactionManager.addUserDefinedOperation(this.nativeHandle,i,t)}}function pt(e,t,i){const n=e.createUserDefinedTransactionHandler((e=>{t(JSON.parse(e))}),(e=>{i(JSON.parse(e))}));return new dt(n,e)}var ct;!function(e){e[e.AlwaysVisible=0]="AlwaysVisible",e[e.VisibleWhenActive=1]="VisibleWhenActive"}(ct||(ct={}));class _t{constructor(e,t){this._tool=e,this._options=t,e._logDebug("SimpleToolStatusBarComponent.constructor")}finalize(){this._tool._logDebug("SimpleToolStatusBarComponent.finalize"),this._statusBarItem=this.session.createStatusBarItem(this._options.alignment,this._options.size),this._statusBarItem.text=this._options.displayAltText,this._options.visibility!==ct.AlwaysVisible&&this.hide(),this._options.onFinalize&&this._options.onFinalize(this)}teardown(){this._tool._logDebug("SimpleToolStatusBarComponent.teardown"),this._options.onTeardown&&this._options.onTeardown(this)}get session(){return this._tool.session}get statusBarItem(){if(!this._statusBarItem)throw new Error("Component has not been finalized!");return this._statusBarItem}get simpleTool(){return this._tool}onShow(){this._tool._logDebug("SimpleToolStatusBarComponent.onShow"),this._options.onShow&&this._options.onShow(this)}onHide(){this._tool._logDebug("SimpleToolStatusBarComponent.onHide"),this._options.onHide&&this._options.onHide(this)}show(){this._tool._logDebug("SimpleToolStatusBarComponent.show"),this.statusBarItem.show(),this.onShow()}hide(){this._options.visibility!==ct.AlwaysVisible?(this._tool._logDebug("SimpleToolStatusBarComponent.hide"),this.onHide(),this.statusBarItem.hide()):this._tool._logDebug("SimpleToolStatusBarComponent.hide (Ignoring because of visibility setting)")}}class ut{constructor(e,t,i,n){if(this._childPanes=[],this._tool=e,this._options=t,this._isModal=!!n,this._bindingToolRail=n,this._isRoot=!i,this._parentPane=i,!this._isRoot&&this._bindingToolRail)throw new Error("Sub Panes cannot be bound to modal tool rails!");this._options.childPanes&&this._options.childPanes.forEach((e=>{this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Creating child pane: ${e.title}`);const t=new ut(this._tool,e,this,void 0);this._childPanes.push(t)}))}get session(){return this._tool.session}get simpleTool(){return this._tool}get pane(){if(!this._pane)throw new Error("Component has not been finalized!");return this._pane}get childPaneList(){return this._childPanes.map((e=>e.id))}get isVisible(){return this._pane?.visible??!1}get id(){return this._options.id}get parent(){return this._parentPane}reconstructPane(){if(this._isRoot)throw new Error("Root panes cannot be reconstructed!");this.teardown(),this.finalize(!0)}findPane(e){if(this.id===e)return this;for(const t of this._childPanes){const i=t.findPane(e);if(i)return i}}showPane(){this._isModal?this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: showPane -- ignoring because isModal`):(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: showPane`),this._pane?.show())}hidePane(){this._isModal?this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: hidePane -- ignoring because isModal`):(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: hidePane`),this._pane?.hide())}showChildPane(e){const t=this._childPanes.find((t=>t.id===e));if(!t)throw new Error(`Child pane with id ${e} not found!`);let i=this;for(;i;)i.showPane(),i=i.parent;this._options.childPanesMutuallyExclusive?this.showChildExclusively(e):(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: showChild(${e})`),t.showPane())}hideChild(e){const t=this._childPanes.find((t=>t.id===e));if(!t)throw new Error(`Child pane with id ${e} not found!`);this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: hideChild(${e})`),t.hidePane()}showChildExclusively(e){this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: showChildExclusively(${e})`),this._childPanes.forEach((t=>{t.id===e?t.showPane():t.hidePane()}))}finalize(e){if(this._tool._logDebug(`SimpleToolPaneComponent(${this._options.id}) :: finalize (reconstruct: ${e})`),this._isRoot){if(e)throw new Error("Root panes cannot be reconstructed!");this._pane=this.session.createPropertyPane({title:this._options.title})}else{if(!this._parentPane)throw new Error("Unable to create a sub-pane because no parent pane was provided!");if(e){if(!this._pane)throw new Error("Unable to reconstruct a pane that was never created!");this._parentPane.pane.removePropertyPane(this._pane)}this._pane=this._parentPane.pane.createPropertyPane({title:this._options.title})}if(this._bindingToolRail){if(!this._isRoot)throw new Error("Sub Panes cannot be bound to modal tool rails!");if(e)throw new Error("Root panes cannot be reconstructed!");this._bindingToolRail.toolRail.bindPropertyPane(this._pane)}this._pane.onPropertyPaneVisibilityUpdated.subscribe((e=>{this._tool._logDebug(`onPropertyPaneVisibilityUpdated(${this.id}): ${e.isVisible}`),e.isVisible?this.onShow():this.onHide()})),this._isModal||!this._isRoot||e||this._tool.addRunOnMenuCreation((e=>{e?(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Adding visibility menu for pane`),this._subMenuItem=e.addItem({label:`${this.pane.title}`,checked:!1},this.session.actionManager.createAction({actionType:i.NoArgsAction,onExecute:()=>{this._pane?.visible?(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Manual Action -- Hiding pane`),this.hidePane(),this._subMenuItem&&(this._subMenuItem.checked=!1)):(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Manual Action -- Showing pane`),this.showPane(),this._subMenuItem&&(this._subMenuItem.checked=!0))}}))):this._tool._logError(`SimpleToolPaneComponent(${this.id}) :: Failed to add visibility menu for pane: no root menu found`)})),this._options.onBeginFinalize&&this._options.onBeginFinalize(this);for(const t of this._childPanes)t.finalize(e);this._options.onEndFinalize&&this._options.onEndFinalize(this),this._childPanes.length&&(this._options.childPaneInitiallyVisible?""===this._options.childPaneInitiallyVisible?(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Hiding all children (initially visible is set to empty)`),this._childPanes.forEach((e=>e.hidePane()))):this.showChildExclusively(this._options.childPaneInitiallyVisible):(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Showing all children (no initial visibility specified)`),this.showPane())),this._isModal||this._pane.visible&&this._pane.show()}teardown(){this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: teardown`);for(const e of this._childPanes)e.teardown();this._options.onTeardown&&this._options.onTeardown(this)}onShow(){if(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: onShow`),this._options.onShow&&this._options.onShow(this),this._subMenuItem&&(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Enabling submenu for visibility`),this._subMenuItem.checked=!0),!this._bindingToolRail&&this._isRoot){const e=this._tool.getComponent(_t);e&&e.show()}}onHide(){if(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: onHide`),this._options.onHide&&this._options.onHide(this),this._subMenuItem&&(this._tool._logDebug(`SimpleToolPaneComponent(${this.id}) :: Disabling submenu for visibility`),this._subMenuItem.checked=!1),!this._bindingToolRail&&this._isRoot){const e=this._tool.getComponent(_t);e&&e.hide()}}}class gt{constructor(e,t){this._tool=e,this._options=t}get simpleTool(){return this._tool}finalize(){this._tool._logDebug("SimpleToolRailComponent.finalize");const e=this.session.actionManager.createAction({actionType:i.NoArgsAction,onExecute:()=>{this.session.toolRail.setSelectedOptionId(this._modalTool?.id,!0)}});this._modalTool=this.session.toolRail.addTool({title:this._options.title,tooltip:this._options.tooltip,icon:this._options.icon},e),this._tool.activationKeyBinding&&(this._tool._logDebug("SimpleToolRailComponent::registering activation key binding"),this.session.inputManager.registerKeyBinding($.GlobalToolMode,e,this._tool.activationKeyBinding.binding,this._tool.activationKeyBinding.info)),this._modalTool.onModalToolActivation.subscribe((e=>{e.isActiveTool?this.onActivate():this.onDeactivate()})),this._modalTool.hide(),this._options.onFinalize&&this._options.onFinalize(this)}teardown(){this._tool._logDebug("SimpleToolRailComponent.teardown"),this._options.onTeardown&&this._options.onTeardown(this)}onActivate(){this._tool._logDebug("SimpleToolRailComponent::onActivate"),this._options.onActivate&&this._options.onActivate(this);const e=this._tool.getComponent(_t);e&&e.show();const t=this._tool.getComponent(ut);t&&t.showPane()}onDeactivate(){this._tool._logDebug("SimpleToolRailComponent::onDeactivate");const e=this._tool.getComponent(_t);e&&e.hide(),this._options.onDeactivate&&this._options.onDeactivate(this)}get session(){return this._tool.session}get tool(){return this._tool}get toolRail(){if(!this._modalTool)throw new Error("Component has not been finalized!");return this._modalTool}}class mt{constructor(e,t){if(this._components=[],this._functionsToRunOnMenuCreation=[],this._internalDebugOutput=!1,this._session=e,this._options=t,this._session.menuBar.getMenu(ue.View).then((e=>{this._logDebug("Adding root menu item for this tool"),this._rootMenu=e.addItem({label:this.name,uniqueId:this.name+":Root"}),this._functionsToRunOnMenuCreation.forEach((e=>e(this._rootMenu)))})).catch((()=>{this._logError("Failed to add root menu item for this tool")})),this._options.toolRailOptions&&this._addComponent(new gt(this,this._options.toolRailOptions)),this._options.propertyPaneOptions){const e=this.getComponent(gt);this._addComponent(new ut(this,this._options.propertyPaneOptions,void 0,e))}if(this._options.statusBarOptions&&this._addComponent(new _t(this,this._options.statusBarOptions)),this._options.activationKeyBinding){if(this.getComponent(gt));else{const t=this.getComponent(ut);if(!t)throw new Error("You can't add a global binding to a tool that doesn't have a tool rail or pane");{this._logDebug("Adding global keybinding to toggle pane visibility");const n=e.actionManager.createAction({actionType:i.NoArgsAction,onExecute:()=>{this._logDebug("Global keybinding activated"),t.showPane()}});this._session.inputManager.registerKeyBinding($.GlobalToolMode,n,this._options.activationKeyBinding.binding,this._options.activationKeyBinding.info)}}}this._finalize()}logInfo(e){U.editor.log.info(e,{player:this._session.extensionContext.player,tags:[this.name]})}logWarn(e){U.editor.log.warning(e,{player:this._session.extensionContext.player,tags:[this.name]})}logError(e){U.editor.log.error(e,{player:this._session.extensionContext.player,tags:[this.name]})}logDebug(e){U.editor.log.debug(e,{player:this._session.extensionContext.player,tags:[this.name]})}get activationKeyBinding(){return this._options.activationKeyBinding}get session(){return this._session}get toolRail(){const e=this.getComponent(gt);if(!e)throw new Error("No toolrail component has been added to this tool!");return e}get statusBar(){const e=this.getComponent(_t);if(!e)throw new Error("No status bar component has been added to this tool!");return e}get pane(){const e=this.getComponent(ut);if(!e)throw new Error("No pane component has been added to this tool!");return e}get name(){return this._options.name}get menu(){return this._rootMenu}findPane(e){const t=this.pane;if(t)return t.findPane(e)}showPane(e){if(!e)return this.pane?void this.pane.showPane():void this.logError("No pane has been added to this tool");const t=this.findPane(e);if(!t)return void this.logError(`Could not find pane with id: ${e}`);const i=t.parent;i?(this._logDebug(`SimpleTool(${this.name}) :: showPane(${e}) - asking parent to show it`),i.showChildPane(e)):t.showPane()}showPaneExclusively(e){const t=this.findPane(e);if(!t)return void this.logError(`Could not find pane with id: ${e}`);const i=t.parent;i?(this._logDebug(`SimpleTool(${this.name}) :: showPaneExclusively(${e}) - asking parent to show it`),i.showChildExclusively(e)):(this._logDebug(`SimpleTool(${this.name}) :: showPaneExclusively(${e}) - asking for a top level pane - which can't have sibliings, so exclusive doesn't really make sense`),t.showPane())}hidePane(e){if(!e)return this.pane?void this.pane.hidePane():void this.logError("No pane has been added to this tool");const t=this.findPane(e);if(!t)return void this.logError(`Could not find pane with id: ${e}`);const i=t.parent;i?(this._logDebug(`SimpleTool(${this.name}) :: hidePane(${e}) - asking parent to hide it`),i.hideChild(e)):t.hidePane()}_addComponent(e){this._components.push(e)}getComponent(e){return this._components.find((t=>t instanceof e))}addRunOnMenuCreation(e){this._functionsToRunOnMenuCreation.push(e)}_logInfo(e){this._internalDebugOutput&&this.logInfo(e)}_logWarn(e){this._internalDebugOutput&&this.logWarn(e)}_logDebug(e){this._internalDebugOutput&&this.logDebug(e)}_logError(e){this._internalDebugOutput&&this.logError(e)}_finalize(){this._logDebug("Finalizing tool"),this._components.forEach((e=>e.finalize(!1))),this._options.onFinalize&&this._options.onFinalize(this),this.addRunOnMenuCreation((()=>{this._logDebug("Checking if root menu is empty"),this._rootMenu&&0===this._rootMenu.submenu.length&&(this._logDebug("Hiding root menu - its empty"),this._rootMenu.hide())}))}teardown(){this._logDebug("teardown tool"),this._components.forEach((e=>e.teardown())),this._options.onTeardown&&this._options.onTeardown(this)}}class yt{get simpleTool(){if(!this._simpleTool)throw new Error("setupSimpleTool needs to be called before accessing simpleTool!");return this._simpleTool}get session(){if(!this._session)throw new Error("setupSimpleTool needs to be called before accessing session!");return this._session}setupSimpleTool(e,t){this._session=e,this._simpleTool=new mt(e,t)}teardown(){this._simpleTool?.teardown()}}O.system.beforeEvents.watchdogTerminate.subscribe((e=>{e.cancel=!0}))})();var r=o.MF,a=o.So,l=o.ni,h=o.M1,d=o.M5,p=o.si,c=o.yy,_=o.ih,u=o.Cc,g=o.ss,m=o.yo,y=o.xf,b=o.UD,v=o.i5,f=o.bu,E=o.eC,C=o.CF,P=o.Po,I=o.dN,S=o.TN,T=o.dT,x=o.Gm,w=o.zI,M=o.kQ,D=o.bs,B=o.rL,A=o.my,U=o.je,O=o.oD,k=o.GU,N=o.uW,R=o.aF,L=o.Dx,V=o.hj,z=o.gN,K=o.u2,Y=o.Y7,F=o.kZ,H=o.fT,W=o.zh,j=o.el,X=o.P3,G=o.u8,$=o.KN,Q=o.ui,J=o.z7,Z=o.Yd,q=o.s9,ee=o.VH,te=o.zo,ie=o.oq,ne=o.BI,se=o._Y,oe=o.IT,re=o.uG,ae=o.YY,le=o.VP,he=o.t6,de=o.eo,pe=o.l2,ce=o.AO,_e=o.Y1,ue=o.XS,ge=o.ZE,me=o.Sp,ye=o.pz,be=o.vQ,ve=o.F_,fe=o.ES,Ee=o.EX,Ce=o.BH,Pe=o.fM,Ie=o.vH,Se=o.wt,Te=o.DQ,xe=o.$L,we=o.w2,Me=o.g2,De=o.fH,Be=o.vJ,Ae=o.Rn,Ue=o.j6,Oe=o.lK,ke=o.iF,Ne=o.YH,Re=o.rC,Le=o.CD,Ve=o.xJ;export{r as ActionTypes,a as BedrockEventSubscriptionCache,l as BlockPalette,h as BlockPaletteItemType,d as BlockPaletteManager,p as BoolPropertyItemVariant,c as BrushPipelineOperationType,_ as BrushShapeManager,u as ButtonPropertyItemVariant,g as ClipboardChangeAfterEvent,m as ClipboardChangeAfterEventSignal,y as ClipboardItem,b as ClipboardManager,v as ColorPickerVariant,f as CoreActionBarItemType,E as CoreMenuType,C as Cursor,P as CursorAttachmentPropertiesChangeAfterEvent,I as CursorAttachmentPropertyChangeAfterEventSignal,S as CursorControlMode,T as CursorPropertiesChangeAfterEvent,x as CursorPropertyChangeAfterEventSignal,w as CursorTargetMode,M as CustomWidget,D as CustomWidgetMoveEventData,B as DaylightCycle,A as EditorInputContext,U as EditorMode,O as EditorServerEventType,k as EditorStatusBarAlignment,N as EntityOperationType,R as ExportManager,L as ExportResult,V as Extension,z as ExtensionContext,K as ExtensionContextAfterEvents,Y as GamePublishSetting,F as GraphicsSettings,H as GraphicsSettingsProperty,W as IBlockPaletteItem,j as ImageResourceType,X as InputModifier,G as KeyboardKey,$ as LayoutAlignment,Q as LayoutDirection,J as LineWidget,Z as Logger,q as MinecraftEditor,ee as ModeChangeAfterEvent,te as ModeChangeAfterEventSignal,ie as MouseActionCategory,ne as MouseActionType,se as MouseInputType,oe as PlayerPermissionLevel,re as PlaytestManager,ae as PlaytestSessionResult,le as PrimarySelectionChangeAfterEventSignal,he as PrimarySelectionChangedEvent,de as ProbabilityBlockPaletteItem,pe as ProjectExportType,ce as PropertyItemType,_e as Selection,ue as SelectionEventAfterEvent,ge as SelectionManager,me as ServerUXEventType,ye as SettingsManager,be as SettingsUIElement,ve as SimpleBlockPaletteItem,fe as SimpleToolStatusBarVisibility,Ee as SimpleToolWrapper,Ce as SimulationState,Pe as ThemeSettings,Ie as ThemeSettingsColorKey,Se as TransactionManager,Te as UserDefinedTransactionHandlerId,xe as Widget,we as WidgetGroup,Me as WidgetGroupSelectionMode,De as WidgetManager,Be as WidgetStateChangeEventData,Ae as bindDataSource,Ue as editor,Oe as executeLargeOperation,ke as executeLargeOperationFromIterator,Ne as getBlockPickerDefaultAllowBlockList,Re as makeObservable,Le as registerEditorExtension,Ve as registerUserDefinedTransactionHandler};